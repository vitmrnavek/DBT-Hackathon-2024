### tests: https://hub.getdbt.com/calogica/dbt_expectations/latest/

schema_template:
  products:
      expected_row_count:
        count: 10000
        tolerance: 0.05
      data_load_type: incremental
      primary_key: id

      columns:
        - name: id
          tests:
            - unique
            - not_null
            - dbt_expectations.expect_column_values_to_be_in_type_list:
                column_type_list: [integer, string]
        - name: string

        - name: name
          tests:
          - dbt_expectations.expect_column_values_to_be_in_type_list:
                column_type_list: [float,decimal]

        # TABLE 1
        - name: ProductID # Test 1
          tests:
            - not_null
            - unique
            - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list: [string,integer]

        - name: ProductName # Test 2
          tests:
            - not_null
            - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list: [string]

        - name: Category #Test 3
          tests:
            - not_null
            - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list: [string]

        - name: Price # Test 4
          tests:
            - not_null
            - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list: [decimal]

        - name: SKU # Test 5
          tests:
          - not_null
          - unique
          - dbt_expectations.expect_column_values_to_be_in_type_list:
            column_type_list: [string]
  inventory:
      expected_row_count:
        count: 30000
        tolerance: 0.05
      data_load_type: incremental
      primary_key: id
      columns:
        - id: integer
          tests:
            - unique
            - not_null
            - dbt_expectations.expect_column_values_to_be_in_type_list:
                column_type_list: [integer, string]
        - store_id: integer
        - stock_level: integer
        - restock_date: datetime
        - created_at: datetime
        - updated_at: datetime

mapping:
  products:
    table_location: data_sample.generated_product_information 
    id:
    - data_sample.generated_product_information.productid
    - data_sample.generated_sales_data.productid
    name: 
    - data_sample.generated_product_information.productname